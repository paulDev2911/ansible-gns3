---
- name: "Setup VLAN on pfSense"
  hosts: pfsense
  gather_facts: false
  collections:
    - pfsensible.core

  tasks:

  - name: "Create VLAN on LAN interface"
    pfsense_vlan:
      interface: "em1"           # Physisches Interface, NICHT NET:lan
      vlan_id: 10
      descr: "printer"
      # mtu wird nicht unterst√ºtzt - entfernt
      state: present

  - name: "Assign VLAN interface"
    pfsense_interface:
      interface: "em1.10"        # Format: interface.vlan_id
      descr: "printer"
      enable: true
      ipv4_type: static
      ipv4_address: "192.168.10.1"    # Nicht ipv4_addr
      ipv4_prefixlen: 24              # Nicht ipv4_subnetmask
      state: present